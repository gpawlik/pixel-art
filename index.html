<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        
    </head>
    <body>
        <h1>Pixelated image</h1>
        
        <p>Change pixel resolution <input type="range" min="4" max="100" value="32" id="range" autocomplete="off" /> <span id="output">32</span></p>

        <div>
            <img src="resources/img/boticelli_venus_and_mars_1483.jpg" id="target_image" />
        </div>        
        
        <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
        
        <script src="resources/js/close-pixelate.js"></script>
        <script>
        $(function() {
            var $image  = $('#target_image');
            var $range  = $('#range');
            var $output = $('#output');            

            var resolution = 32;
            var base_colors = ["ffcc00", "bbcc00", "33dd11", "aeaeae"];
            var alpha = 0.5;
            
            var pixelOpts = [{resolution: resolution, base_colors: base_colors, alpha: alpha}];            
            var pixelImage = $image.get(0).closePixelate(pixelOpts);            

            $range.on("change mousemove", function() {
                var res = parseInt( this.value, 10 );
                res = Math.floor(res / 2) * 2;
                res = Math.max(4, Math.min(100, res));
                $output.text(res);                                

                pixelOpts = [{resolution: res, base_colors: base_colors}];
                pixelImage.render(pixelOpts);
            });
        });
        </script>        
    </body>
</html>